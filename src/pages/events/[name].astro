---
// src/pages/eventos/[name].astro

import MainLayouts from '../components/Layouts/MainLayouts.astro';
import Slider from '../components/Slider.astro';

interface Event {
  name: string;
  images: { url: string }[]; 
  dates: string;
  url: string;
  dayName: string | null;
  monthName: string | null;
  hour: string | null;
}

// Obtener las rutas para cada evento
export async function get({ params }: { params: { name: string } }) {
  const response = await fetch(import.meta.env.API_EVENTOS_URL);
  const data = await response.json();

  const events = data._embedded?.events || [];

  return events.map((event: any) => ({
    params: { 
      name: event.name.replace(/\s+/g, '-').toLowerCase()
    },
    props: { event },
  }));
};
const { event } = Astro.props as { event: Event };
---

<MainLayouts title={event.name}>
  <!-- Columna de eventos -->
  <div class="flex flex-1">
    <div class="w-full relative bg-white">
      <div class="w-full absolute top-0 h-72 bg-cover bg-center p-4" style="background: url('../../img/titulo_pagina.png');">  
        <div class="flex">
          <!-- Columna de 80% -->
          <div class="w-4/5">
            <h2 class="text-7xl text-slider-nav font-bold m-6 ml-32 text-left">{event.name}</h2>
          </div>        
          <!-- Columna de 20% -->
          <div class="w-1/5">
            <a href="/eventos" class="text-right text-botones hover:text-botones-hover mr-12 m-5 text-8xl"><img class="ml-12 mt-2" src="https://umanizales.edu.co/sites/default/files/2024-08/image.png" width="100" height="100" /></a>
          </div>
        </div>   
          <hr class="bg-botones h-3 w-1/2 -ml-4">
      </div>
      <div class="w-full flex items-center justify-center h-4/5 mt-12">    
        <div class="grid grid-cols-6 gap-4">
          <div class="col-start-2 col-span-4 mt-36">
          </div>
          <div class="col-start-2 col-end-4 mt-4">
            <p class="tag w-full text-left text-3xl font-medium text-slider-nav">Lugar del evento:</p>
          </div>
          <div class="col-end-8 col-span-4 mt-4">
            <p class="tag w-full text-left text-3xl font-medium text-slider-nav">Fecha y hora del evento:</p>
            <p class="text-black text-2xl font-medium">{event.dates} {event.dates}</p>
            <p class="text-black text-2xl font-light">{event.dates}</p>
          </div>
          <div class="col-start-2 col-end-4 mt-4">
            <p class="tag w-full text-left text-3xl font-medium text-slider-nav">Modalidad:</p>
            <label class="text-slider-nav" style="text-transform: capitalize;">{event.dates}</label>
          </div>
          <div class="col-end-8 col-span-4 mt-4">
            <p class="tag w-full text-left text-3xl font-medium text-slider-nav">Moderador:</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Slider -->
   <Slider />
</MainLayouts>
