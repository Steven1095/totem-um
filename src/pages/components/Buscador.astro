---
// Importa el archivo JSON
import Dependencias from './data/dependencias.json';
---

<div x-data="ComponenteBuscador()"  class="w-full max-w-full mx-auto mt-8 px-4">
  <input type="text" x-model="search" placeholder="Buscar..." class="w-full text-6xl p-3 border border-gray-300 rounded-xl mb-4"
  />
  <div class="flex max-h-[800px] w-full flex-col overflow-y-scroll mt-12">
    <template x-for="item in items.filter(i => i.name.toLowerCase().includes(search.toLowerCase()))" :key="item.name">
      <button class="group flex items-center gap-x-5 rounded-md px-2.5 py-2 transition-all duration-75 hover:bg-green-100 mt-5">
        <div class="flex h-24 w-1/6 items-center group-hover:bg-green-200">
            <p class="tag w-full text-center text-5xl font-medium text-gray-600 group-hover:text-green-900">
              <i :class="'fas ' + item.icon" class="mr-2"></i>
            </p>
        </div>
        <div class="flex w-full flex-col items-start justify-between">
            <p class="text-left text-4xl text-slider-nav font-semibold" x-text="item.name"></p>
        </div>
      </button>
      <hr class="bg-yellow-500 h-1 w-1/2 -ml-28 items-center">
    </template>
  </div>
</div>

<script>
  function searchComponent() {
    return {
      search: '',
      items: [],
      get filteredItems() {
        return this.items.filter(item => item.name.toLowerCase().includes(this.search.toLowerCase()));
      },
      async fetchItems() {
        // Asigna los datos del archivo JSON a la variable items
        this.items = await (await fetch('/data/items.json')).json();
      },
      init() {
        this.fetchItems();
      }
    };
  }
</script>
